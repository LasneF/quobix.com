<!doctype html><html lang=en><head><script type=application/ld+json>{"@context":"https://schema.org","@type":"NewsArticle","headline":"vacuum: Handling References","image":["https:\/\/quobix.com\/"],"datePublished":"0001-01-01 00:00:00 \u002b0000 UTC","author":{"@type":"Person","name":"Dave Shanley","url":"https://quobix.com/author"}}</script><meta charset=utf-8><link rel=apple-touch-icon sizes=180x180 href=https://quobix.com//apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://quobix.com/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://quobix.com/favicon-16x16.png><meta name=description content="quobix::vaccum, The worlds fastest OpenAPI linter. Handling remote, or relative external references in specifications"><meta charset=utf-8><meta name=keywords content="OpenAPI,swagger,spectral,linting,linter,vacuum,dave shanley,shanley,code,golang,java,javascript,typescript,quobix,engineer"><link crossorigin=use-credentials rel=manifest href=https://quobix.com/site.webmanifest><meta name=author content="Dave Shanley"><meta name=viewport content="width=device-width,initial-scale=1"><title>vacuum OpenAPI Linter: Handling References</title><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-PC979K2")</script><link rel=preload href=https://quobix.com/assets/bundle.js as=script><script src=https://quobix.com/assets/bundle.js></script><style>:root{--global-font-size:17px;--toc-font-size:0.7rem;--breadcrumb-font-size:0.75rem;--childnav-font-size:0.75rem;--nav-font-size:0.95rem;--toc-font-header-size:0.85rem;--rule-item-header-fontsize:1.2rem;--rule-item-header-fontsize-mobile:1rem;--rule-item-details-fontsize:0.8rem;--rule-format-fontsize:0.8rem;--rule-type-fontsize:0.7rem;--rule-severity-fontsize:0.8rem;--rule-recommended-fontsize:0.7rem;--rule-function-fontsize:0.8rem;--rule-recommended-banner-fontsize:1rem;--rule-panel-label:0.7rem;--rule-id-fontsize:2rem;--rule-id-fontsize-mobile:1.3rem;--global-line-height:1.4em;--global-space:10px;--vacuum-navigation-width-v:199px;--vacuum-navigation-width:200px;--font-stack:Menlo, Monaco, Roboto Mono, Lucida Console, Liberation Mono,
            DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace,
            serif;--mono-font-stack:Menlo, Monaco, Roboto Mono, Lucida Console, Liberation Mono,
            DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace,
            serif;--background-color:#0d1117;--background-color-alpha:rgba(13, 17, 23, 0.80);--background-color-alpha-mobile:rgba(13, 17, 23, 0.99);--rule-item-background:rgba(26, 32, 44, 0.51);--rule-recommended-background:rgb(33, 41, 55);--rule-stats-background:#0a0a0a;--rule-item-border:rgba(35, 43, 58, 0.9);--navigation-hover:#b685ff33;--navigation-child-selected:rgba(182, 133, 255, 0.36);--navigation-child-hover:rgba(179, 131, 250, 0.09);--navigation-child-container:linear-gradient(180deg, rgba(0,0,0,1) 0%, rgba(182,133,255,0.2) 50%);--vacuum-online-results-background:linear-gradient(180deg, rgba(13, 17, 23,1) 0%, rgba(223, 222, 225, 0.12) 50%);--page-width:65em;--font-color:#e8e9ed;--invert-font-color:#222225;--secondary-color:#f83aff;--secondary-color-lowalpha:rgba(248, 58, 255, 0.30);--secondary-color-very-lowalpha:rgba(182, 133, 255, 0.23);--secondary-color-shadow:rgb(59, 41, 87);--secondary-color-shadow-mid:rgb(78, 54, 114);--tertiary-color:#a3abba;--terminal-border:rgba(76, 81, 91, 0.5);--terminal-header-background:linear-gradient(90deg, rgba(76, 81, 91, 0.5) 0%, rgba(76, 81, 91, 0.1) 80%);--primary-color:rgba(98, 196, 255, 1.0);--primary-color-lowalpha:rgba(98, 196, 255, 0.6);--error-color:#ff3c74;--error-font-color:#ff246b;--error-color-lowalpha:rgba(255, 60, 116, 0.4);--progress-bar-background:#0a0a0a;--progress-bar-fill:#62c4ff;--code-bg-color:none;--input-style:solid;--display-h1-decoration:none;--bold-text:#f83aff;--terminal-green:#00FF00FF;--terminal-yellow:#fddb00;--hrcolor:#3d3d3d;--code-border:#525252;--string-literal:#fd66e5;--warn-400:#ff6a00;--warn-400-lowalpha:rgba(255, 106, 0, 0.15);--warn-300:#ff9900;--warn-300-lowalpha:rgba(255, 153, 0, 0.05);--warn-200:#ffb700;--warn-200-lowalpha:rgba(255, 183, 0, 0.15);--warn-color:#ffd500;--warn-color-lowalpha:rgba(255, 213, 0, 0.15);--ok-400:#f7ff00;--ok-400-lowalpha:rgba(230, 255, 0, 0.15);--ok-300:#d0ff00;--ok-300-lowalpha:rgba(208, 255, 0, 0.15);--ok-200:#aaff00;--ok-200-lowalpha:rgba(170, 255, 0, 0.15);--ok-color:#1aff00;--ok-color-lowalpha:rgba(170, 255, 0, 0.15)}</style><link rel=stylesheet href=https://quobix.com/assets/syntax.css><link rel=stylesheet href=https://quobix.com/assets/app.css><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="vacuum OpenAPI Linter: Handling References"><meta property="og:description" content="Handling remote, or relative external references in specifications"><meta property="og:publish_date" content="0001-01-01 00:00:00 +0000 UTC"><meta property="og:url" content="https://quobix.com/vacuum/commands/external-references/"><meta property="og:site_name" content="quobix"><meta property="og:image" content="https://quobix.com/images/vacuum/logo-blackbg.png"><meta property="og:image:width" content="1400"><meta property="og:image:height" content="680"><meta property="og:image:secure_url" content="https://quobix.com/images/vacuum/logo-blackbg.png"><meta property="og:image:type" content="image/png"><meta property="og:image:alt" content="https://quobix.com/images/vacuum/logo-blackbg.png"><meta property="article:author" content="https://quobix.com"><meta property="article:publisher" content="https://quobix.com"><meta property="article:section" content="Software"><meta property="article:published_time" content="0001-01-01 00:00:00 +0000 UTC"><meta property="article:modified_time" content="0001-01-01 00:00:00 +0000 UTC"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@daveshanley"><meta name=twitter:creator content="@daveshanley"><meta name=twitter:label1 content="Written by"><meta name=twitter:data1 content="Dave Shanley"><link rel=stylesheet href=https://quobix.com/assets/vacuum.css></head><body class=terminal><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PC979K2" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><div class=quobix-header><section class=terminal-nav id=main-navigation><header class=terminal-logo><div class="logo terminal-prompt"><a href=https://quobix.com/>quobix</a><span class=vacuum-sep>::</span><span class=vacuum-title>vacuum</span></div></header><nav class=terminal-menu id=header-menu><ul itemscope itemtype=http://schema.org/BreadcrumbList><li itemprop=itemListElement itemscope itemtype=http://schema.org/ListItem><a href=https://quobix.com/articles/ itemprop=item class=menu-item><span itemprop=name>Articles</span><meta itemprop=position content="1"></a></li><li itemprop=itemListElement itemscope itemtype=http://schema.org/ListItem><a href=https://quobix.com/author/ itemprop=item class=menu-item><span itemprop=name>Author</span><meta itemprop=position content="2"></a></li><li itemprop=itemListElement itemscope itemtype=http://schema.org/ListItem><a href=https://quobix.com/vacuum/ itemprop=item class=menu-item><span itemprop=name>vacuum</span><meta itemprop=position content="3"></a></li></ul></nav></section><hr id=top-nav-divider></div><div class=container><div class=main-container><main class=content-container><nav class=vacuum-navigation><div class=fixed-position><a href=https://quobix.com/vacuum/start class=quick-start-navigation>Quick Start Guide&nbsp;</a><hr class=quick-start-divider><vacuum-desktop-navigation><vacuum-nav-item url=https://quobix.com/vacuum/installing/ name=Installing></vacuum-nav-item></vacuum-nav-item>
<vacuum-nav-item url=https://quobix.com/vacuum/about/ name="About vacuum"></vacuum-nav-item>
<vacuum-nav-item url=https://quobix.com/vacuum/why/ name=Why?></vacuum-nav-item>
<vacuum-nav-item url=https://quobix.com/vacuum/concepts/ name=Concepts></vacuum-nav-item>
<vacuum-nav-item url=https://quobix.com/vacuum/demo/ name="Online Demo ðŸª„"></vacuum-nav-item>
<vacuum-nav-item url=https://quobix.com/vacuum/faq/ name=FAQ></vacuum-nav-item>
<vacuum-nav-item url name="CLI Commands" open><ul class=navigation-children><li class=child-nav><a href=https://quobix.com/vacuum/commands/lint/>Lint</a></li><li class=child-nav><a href=https://quobix.com/vacuum/commands/report/>vacuum Report</a></li><li class=child-nav><a href=https://quobix.com/vacuum/commands/dashboard/>Dashboard</a></li><li class=child-nav><a href=https://quobix.com/vacuum/commands/html-report/>HTML Report</a></li><li class=child-nav><a href=https://quobix.com/vacuum/commands/spectral-report/>Spectral Report</a></li><li class=active-child-nav>External References</li></ul></vacuum-nav-item><vacuum-nav-item url name="Developer API"><ul class=navigation-children><li class=child-nav><a href=https://quobix.com/vacuum/api/getting-started/>API Quick Start</a></li><li class=child-nav><a href=https://quobix.com/vacuum/api/spec-index/>Spec Index</a></li><li class=child-nav><a href=https://quobix.com/vacuum/api/rule-resultset/>RuleResultSet</a></li><li class=child-nav><a href=https://quobix.com/vacuum/api/loading-ruleset/>Loading RuleSet</a></li><li class=child-nav><a href=https://quobix.com/vacuum/api/custom-functions/>Custom Functions</a></li></ul></vacuum-nav-item><vacuum-nav-item url name=Functions><ul class=navigation-children><li class=child-nav><a href=https://quobix.com/vacuum/functions/core/>Core Functions</a></li><li class=child-nav><a href=https://quobix.com/vacuum/functions/openapi/>OpenAPI Functions</a></li></ul></vacuum-nav-item><vacuum-nav-item url name=Rules><ul class=navigation-children><li class=child-nav><a href=https://quobix.com/vacuum/rules/examples/>Examples</a></li><li class=child-nav><a href=https://quobix.com/vacuum/rules/operations/>Operations/Paths</a></li><li class=child-nav><a href=https://quobix.com/vacuum/rules/schemas/>Schemas</a></li><li class=child-nav><a href=https://quobix.com/vacuum/rules/information/>Spec Information</a></li><li class=child-nav><a href=https://quobix.com/vacuum/rules/validation/>Validation</a></li><li class=child-nav><a href=https://quobix.com/vacuum/rules/descriptions/>Descriptions</a></li><li class=child-nav><a href=https://quobix.com/vacuum/rules/tags/>Tags</a></li><li class=child-nav><a href=https://quobix.com/vacuum/rules/security/>Security</a></li></ul></vacuum-nav-item><vacuum-nav-item url name=RuleSets><ul class=navigation-children><li class=child-nav><a href=https://quobix.com/vacuum/rulesets/understanding/>Understanding RuleSets</a></li><li class=child-nav><a href=https://quobix.com/vacuum/rulesets/all/>All Rules</a></li><li class=child-nav><a href=https://quobix.com/vacuum/rulesets/no-rules/>No Rules/Off</a></li><li class=child-nav><a href=https://quobix.com/vacuum/rulesets/recommended/>Recommended Rules</a></li><li class=child-nav><a href=https://quobix.com/vacuum/rulesets/custom-rulesets/>Custom RuleSets</a></li></ul></vacuum-nav-item></vacuum-desktop-navigation><hr class=nav-divider><a class=github-link href=https://github.com/daveshanley/vacuum>GitHub</a>
<img class=nav-badge alt="GitHub Repo stars" src="https://img.shields.io/github/stars/daveshanley/vacuum?color=%23b685ff&style=flat-square"><br><a class=discord-link href=https://discord.gg/UAcUF78MQN>Discord</a>
<img class=nav-badge-discord alt=Discord src="https://img.shields.io/discord/923258363540815912?color=%23b685ff&style=flat-square"></div></nav><mobile-nav><ul class=mobile-nav><li class=mobile-nav><a href=https://quobix.com/vacuum/installing/>Installing</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/start/>Quick Start</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/about/>About vacuum</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/why/>Why?</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/concepts/>Concepts</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/demo/>Online Demo ðŸª„</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/faq/>FAQ</a></li><li class=mobile-nav>CLI Commands<ul><li class=mobile-nav><a href=https://quobix.com/vacuum/commands/lint/>Lint</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/commands/report/>vacuum Report</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/commands/dashboard/>Dashboard</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/commands/html-report/>HTML Report</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/commands/spectral-report/>Spectral Report</a></li><li class="mobile-nav active-section"><a href=https://quobix.com/vacuum/commands/external-references/>External References</a></li></ul></li><li class=mobile-nav>Developer API<ul><li class=mobile-nav><a href=https://quobix.com/vacuum/api/getting-started/>API Quick Start</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/api/spec-index/>Spec Index</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/api/rule-resultset/>RuleResultSet</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/api/loading-ruleset/>Loading RuleSet</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/api/custom-functions/>Custom Functions</a></li></ul></li><li class=mobile-nav>Functions<ul><li class=mobile-nav><a href=https://quobix.com/vacuum/functions/core/>Core Functions</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/functions/openapi/>OpenAPI Functions</a></li></ul></li><li class=mobile-nav>Rules<ul><li class=mobile-nav><a href=https://quobix.com/vacuum/rules/examples/>Examples</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/rules/operations/>Operations/Paths</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/rules/schemas/>Schemas</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/rules/information/>Spec Information</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/rules/validation/>Validation</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/rules/descriptions/>Descriptions</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/rules/tags/>Tags</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/rules/security/>Security</a></li></ul></li><li class=mobile-nav>RuleSets<ul><li class=mobile-nav><a href=https://quobix.com/vacuum/rulesets/understanding/>Understanding RuleSets</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/rulesets/all/>All Rules</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/rulesets/no-rules/>No Rules/Off</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/rulesets/recommended/>Recommended Rules</a></li><li class=mobile-nav><a href=https://quobix.com/vacuum/rulesets/custom-rulesets/>Custom RuleSets</a></li></ul></li><hr class=mobile-nav-divider><li class=mobile-nav><a href=https://github.com/daveshanley/vacuum>GitHub</a>
<img class=nav-badge alt="GitHub Repo stars" src="https://img.shields.io/github/stars/daveshanley/vacuum?color=%23b685ff&style=flat-square"></li><li class=mobile-nav><a href=https://discord.gg/UAcUF78MQN>Discord</a>
<img class=nav-badge-discord alt="Discord Server" src="https://img.shields.io/discord/923258363540815912?color=%23b685ff&style=flat-square"></li></ul></mobile-nav><section class=vacuum-content><div class=breadcrumbs><ul itemscope itemtype=http://schema.org/BreadcrumbList><li itemprop=itemListElement itemscope itemtype=http://schema.org/ListItem><a itemprop=item typeof="WebPage" href=https://quobix.com/vacuum/><span itemprop=name>vacuum</span><meta itemprop=position content="3"></a></li><li itemprop=itemListElement itemscope itemtype=http://schema.org/ListItem><a itemprop=item typeof="WebPage" href=https://quobix.com/vacuum/commands/><span itemprop=name>Commands</span><meta itemprop=position content="2"></a></li><li class=crumb-active itemprop=itemListElement itemscope itemtype=http://schema.org/ListItem><a itemprop=item typeof="WebPage" href=https://quobix.com/vacuum/commands/external-references/><span itemprop=name>External References</span><meta itemprop=position content="1"></a></li></ul></div><article class=framed-content><h1 class=article-title>Handling References</h1><div class=article-strapline><em>Handling remote, or relative external references in OpenAPI specifications</em></div><section class=article-body><hr><p>If the OpenAPI specifcation being processed by <code>vacuum</code> contains external references, then <code>vacuum</code> will need to know
how to handle them when resolving the specification.</p><h2 id=reference-types>Reference Types</h2><p>References come in three forms:</p><ul><li>Local references</li><li>Remote references</li><li>Relative references</li></ul><h2 id=local-references>Local references</h2><p>Local references are those that are local to the specification being processed. They look something like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>$ref</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;#/components/schemas/Error&#39;</span><span class=w>
</span></span></span></code></pre></div><p>They are local in the sense that they are contained within the same document as the reference.</p><p><code>vaccum</code> knows how to handle these references out of the box, without needing any further configuration.</p><h3 id=remote-references>Remote references</h3><p>Remote references are those that are hosted on a remote server, and are accessed via a URL. They look something like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>$ref</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;https://api.quobix.com/openapi.yaml#/components/schemas/Error&#39;</span><span class=w>
</span></span></span></code></pre></div><p>The first part (<em>before the hash</em>) is the full URL to the remote file. The second part (<em>after the hash</em>) is the JSON Pointer
to the object being referenced.</p><p>This is the <strong>correct</strong> way to reference remote files, vacuum will support this out of the box, without needing any
further configuration.</p><blockquote><p>However, this is generally not the way that remote references are used in the wild.</p></blockquote><p>Most of the time an OpenAPI specification assumes you have downloaded the entire set of files from the remote location,
<strong><em>before</em></strong> you start processing the specification, which is not a good assumption to make.</p><div class="terminal-alert terminal-alert-error">The <strong>worst</strong> of the offenders out there that does this
is <a href=https://raw.githubusercontent.com/digitalocean/openapi/main/specification/DigitalOcean-public.v2.yaml>Digital Ocean</a>.</div><h3 id=relative-references>Relative references</h3><p>Relative references can be those that are hosted on a remote server, or on the local file system. They can be either!</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>$ref</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;../../../resources/openapi.yaml#/components/schemas/Error&#39;</span><span class=w>
</span></span></span></code></pre></div><blockquote><p>So how does vacuum know the difference?</p></blockquote><p><strong>It doesn&rsquo;t!</strong></p><p>For example, when parsing the <a href=https://raw.githubusercontent.com/digitalocean/openapi/main/specification/DigitalOcean-public.v2.yaml>Digital Ocean</a>
specification, there are references to relative files that are hosted on the remote server.</p><p>This isn&rsquo;t very useful if the <a href=https://quobix.com/vacuum/api/spec-index/>indexing engine</a> tries to find those files
on the local file system (which is what the specification is indicating) and it can&rsquo;t.</p><h3 id=providing-a-baseurl>Providing a BaseURL</h3><p>To solve this problem, <code>vacuum</code> allows you to provide a <code>BaseURL</code> that will be used to resolve relative references.
This URL is used by the resolver to resolve relative references correctly if they do not exist on the local file system.</p><p>This is done using the <code>-p</code> / <code>--base</code> flag.</p><p>In the <a href=https://raw.githubusercontent.com/digitalocean/openapi/main/specification/DigitalOcean-public.v2.yaml>Digital Ocean</a>
example, the <code>BaseURL</code> would be <a href=https://raw.githubusercontent.com/digitalocean/openapi/main/specification>https://raw.githubusercontent.com/digitalocean/openapi/main/specification</a></p><p>For example</p><pre tabindex=0><code>vacuum lint digitalocean.yaml -p \
https://raw.githubusercontent.com/digitalocean/openapi/main/specification
</code></pre><h3 id=providing-a-base-working-directory>Providing a Base working directory</h3><p>If files are available locally, then you can provide a base working directory that will be used to resolve relative
references. This directory is used by the resolver to resolve relative references correctly if they do exist on the local
file system.</p><p>The default is the current working directory, however it can be set to anything using the same <code>-p</code> / <code>--base</code> flag.</p><terminal-window><terminal-header>vacuum lint using a base working directory</terminal-header>
<terminal-command command="vacuum lint -p ../../specs/openapi digitalocean.yaml" cliname=vacuum clicommand=lint flags=-p></terminal-command></terminal-window><p>The index will look in <code>../../specs/openapi</code> as a base for relative files.</p></section></article></section><div class=right-nav><aside class=table-of-contents><p>What's on this page</p><nav id=TableOfContents><ul><li><a href=#reference-types>Reference Types</a></li><li><a href=#local-references>Local references</a><ul><li><a href=#remote-references>Remote references</a></li><li><a href=#relative-references>Relative references</a></li><li><a href=#providing-a-baseurl>Providing a BaseURL</a></li><li><a href=#providing-a-base-working-directory>Providing a Base working directory</a></li></ul></li></ul></nav></aside></div></main></div><footer class=footer><a href=https://quobix.com/author>Dave Shanley</a> &copy;2007-2023
<span class=generated-timestamp>[generated 06/17/23 16:50 UTC]</span></footer></div></body></html>